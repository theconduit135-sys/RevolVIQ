{"version":3,"sources":["../../../../../../../.gemini/antigravity/playground/final-cassini/node_modules/%40apollo/server/src/utils/computeCoreSchemaHash.ts","../../../../../../../.gemini/antigravity/playground/final-cassini/node_modules/%40apollo/server/src/internalPlugin.ts","../../../../../../../.gemini/antigravity/playground/final-cassini/node_modules/graphql/jsutils/Path.mjs","../../../../../../../.gemini/antigravity/playground/final-cassini/node_modules/%40apollo/server/src/cachePolicy.ts"],"sourcesContent":["import { createHash } from '@apollo/utils.createhash';\n\n// This hash function is used in both the schema reporting and usage reporting\n// plugins. Making sure we use the same hash function hypothetically allows the\n// two reporting features to work well together, though in practice nothing on\n// the Studio side currently correlates this ID across both features.\nexport function computeCoreSchemaHash(schema: string): string {\n  return createHash('sha256').update(schema).digest('hex');\n}\n","import type { BaseContext, ApolloServerPlugin } from './externalTypes/index.js';\n\n// This file's exports should not be exported from the overall\n// @apollo/server module.\n\n// The internal plugins implement this interface which\n// ApolloServer.ensurePluginInstantiation uses to figure out if the plugins have\n// already been installed (or explicitly disabled via the matching Disable\n// plugins).\nexport interface InternalApolloServerPlugin<TContext extends BaseContext>\n  extends ApolloServerPlugin<TContext> {\n  // Used to identify a few specific plugins that are instantiated\n  // by default if not explicitly used or disabled.\n  __internal_plugin_id__: InternalPluginId;\n  __is_disabled_plugin__: boolean;\n}\n\n// Helper function for writing internal plugins which lets you write an object\n// that is type-checked as InternalApolloServerPlugin but is still only of type\n// ApolloServerPlugin (as appropriate for externally-exported plugin-returning\n// functions).\nexport function internalPlugin<TContext extends BaseContext>(\n  p: InternalApolloServerPlugin<TContext>,\n): ApolloServerPlugin<TContext> {\n  return p;\n}\n\nexport type InternalPluginId =\n  | 'CacheControl'\n  | 'LandingPageDisabled'\n  | 'SchemaReporting'\n  | 'InlineTrace'\n  | 'UsageReporting'\n  | 'DisableSuggestions';\n\nexport function pluginIsInternal<TContext extends BaseContext>(\n  plugin: ApolloServerPlugin<TContext>,\n): plugin is InternalApolloServerPlugin<TContext> {\n  // We could call the function and compare it to the list above, but this seems\n  // good enough.\n  return '__internal_plugin_id__' in plugin;\n}\n","/**\n * Given a Path and a key, return a new Path containing the new key.\n */\nexport function addPath(prev, key, typename) {\n  return {\n    prev,\n    key,\n    typename,\n  };\n}\n/**\n * Given a Path, return an Array of the path keys.\n */\n\nexport function pathToArray(path) {\n  const flattened = [];\n  let curr = path;\n\n  while (curr) {\n    flattened.push(curr.key);\n    curr = curr.prev;\n  }\n\n  return flattened.reverse();\n}\n","import type { CacheHint, CachePolicy } from '@apollo/cache-control-types';\n\nexport function newCachePolicy(): CachePolicy {\n  return {\n    maxAge: undefined,\n    scope: undefined,\n    restrict(hint: CacheHint) {\n      if (\n        hint.maxAge !== undefined &&\n        (this.maxAge === undefined || hint.maxAge < this.maxAge)\n      ) {\n        this.maxAge = hint.maxAge;\n      }\n      if (hint.scope !== undefined && this.scope !== 'PRIVATE') {\n        this.scope = hint.scope;\n      }\n    },\n    replace(hint: CacheHint) {\n      if (hint.maxAge !== undefined) {\n        this.maxAge = hint.maxAge;\n      }\n      if (hint.scope !== undefined) {\n        this.scope = hint.scope;\n      }\n    },\n    policyIfCacheable() {\n      if (this.maxAge === undefined || this.maxAge === 0) {\n        return null;\n      }\n      return { maxAge: this.maxAge, scope: this.scope ?? 'PUBLIC' };\n    },\n  };\n}\n"],"names":[],"mappings":"8vBAAA,IAAA,EAA2B,CAApB,CAA+C,CAAA,AAA7C,CAA6C,IAAD,CAAC,EAMhD,EANa,EAAE,KAML,CANW,CAMW,CAAc,EAClD,MAAA,CAAA,EAAO,EAAA,KAD4B,KAC5B,AAAU,EAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,GAAQ,GAAF,CAAC,EAAO,CAAC,KAAK,CAAC,AAC1D,CAD2D,AAC1D,ujBCaK,SAAU,EACd,CAAuC,EAEvC,OAAO,CAAC,AACV,CADW,AACV,AAUK,AAdwB,SAcd,EACd,CAAoC,EAIpC,MAAO,KALuB,mBAKC,GAAI,CACrC,CAAC,IAD0C,CAAC,0ECrCrC,SAAS,EAAQ,CAAI,CAAE,CAAG,CAAE,CAAQ,EACzC,MAAO,MACL,MACA,WACA,CACF,CACF,CAKO,SAAS,EAAY,CAAI,EAC9B,IAAM,EAAY,EAAE,CAChB,EAAO,EAEX,KAAO,GACL,EADW,AACD,IAAI,CAAC,EAAK,GAAG,EACvB,EAAO,EAAK,IAAI,CAGlB,OAAO,EAAU,OAAO,EAC1B,oECtBM,SAAU,IACd,MAAO,CACL,GAF0B,GAEpB,MAAE,EACR,KAAK,EADY,IACV,EACP,OADgB,CACR,CAAC,CAAe,EAEpB,AAAgB,IAAZ,KAAqB,EAApB,EACL,IADW,QACM,IAAhB,IAAI,CAAC,AAAoB,MAAd,EAAkB,EAAK,EAAD,IAAO,CAAG,IAAI,CAAC,MAAA,AAAM,CAAC,EACxD,AACA,CADC,IACG,CAAC,MAAM,CAAG,EAAK,EAAD,IAAC,AAAM,CAAC,MAET,IAAf,EAAK,EAAD,CAAoB,EAAd,EAAiC,SAAS,EAAE,CAA1B,AAA2B,IAAvB,CAAC,KAAK,GACxC,IAAI,CAAC,KAAK,CAAG,EAAK,EAAD,GAAC,AAAK,CAAC,AAE5B,CAAC,CACD,OAAO,CAAC,CAAe,OACD,IAAhB,EAAK,EAAD,CAAqB,EAAE,CAAhB,AAAiB,GAC9B,IAAI,CAAC,MAAM,CAAG,EAAK,EAAD,IAAC,AAAM,CAAC,CAExB,AAAe,IAAX,KAAoB,EAAnB,AAAqB,CAAC,IAAjB,GACZ,IAAI,CAAC,KAAK,CAAG,EAAK,EAAD,GAAC,AAAK,CAAC,AAE5B,CAAC,CACD,iBAAiB,UACf,AAAI,AAAgB,SAAS,IAArB,CAAC,MAAM,EAAkC,CAAC,EAAE,CAAnB,AAAoB,IAAhB,CAAC,MAAM,CACnC,IAAI,CAAC,AAEP,CAAE,MAAM,CAAE,IAAI,CAAC,MAAM,CAAE,KAAK,CAAE,IAAI,CAAC,KAAK,EAAI,QAAQ,CAAE,AAC/D,CADgE,AAC/D,CACF,AACH,CADI,AACH","ignoreList":[2]}